# üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ 500 –æ—à–∏–±–∫–∏ –Ω–∞ Render

## 500 Internal Server Error –Ω–∞ `/api/farmer/loan-applications`

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥–∏ Render

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://dashboard.render.com
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ—Ä–≤–∏—Å **app-agrocredit** (backend)
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ **Logs** (—Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)

### –®–∞–≥ 2: –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—à–∏–±–∫—É

–ü–æ—Å–ª–µ –ø–æ–ø—ã—Ç–∫–∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É, –∏—â–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö:

```
[DB_ADAPTER] Creating loan application for: farmer@example.com
[DB_ADAPTER] Loan data: {...}
[DB_ADAPTER] Getting/creating farmer...
[DB_ADAPTER] ‚ùå ERROR in create_loan_application: ...
```

### –®–∞–≥ 3: –ß—Ç–æ –∏—Å–∫–∞—Ç—å

#### ‚úÖ –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ - –º–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞—è:
```
‚úì Database schema up to date (farmer_id exists)
```

#### ‚ùå –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ - –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å:
```
‚ö†Ô∏è  MIGRATION: farmer_id column missing, adding it...
‚úì Migration complete! Migrated X farmers
```

#### ‚ùå –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ - –¥—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞:
```
[DB_ADAPTER] ‚ùå ERROR in create_loan_application: <–¢–ò–ü_–û–®–ò–ë–ö–ò>: <–°–û–û–ë–©–ï–ù–ò–ï>
Traceback (most recent call last):
  ...
```

### –®–∞–≥ 4: –ß—Ç–æ –¥–µ–ª–∞—Ç—å

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏–∑ –ª–æ–≥–æ–≤** –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ.

–ù—É–∂–Ω–æ –≤–∏–¥–µ—Ç—å:
- –¢–∏–ø –æ—à–∏–±–∫–∏ (OperationalError / ValueError / KeyError –∏ —Ç.–¥.)
- –ü–æ–ª–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- Traceback –µ—Å–ª–∏ –µ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://app-agrocredit.onrender.com/api/db-check
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```json
{
  "has_farmer_id_column": true  // ‚Üê –î–û–õ–ñ–ù–û –ë–´–¢–¨ true!
}
```

–ï—Å–ª–∏ `false` - –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞, –ë–î –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å.

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã 500:

1. **–ö–æ–ª–æ–Ω–∫–∞ farmer_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** ‚Üí –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å
2. **–ù–µ—Ç —Ñ–µ—Ä–º–µ—Ä–∞ —Å —Ç–∞–∫–∏–º email** ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –ë–î** ‚Üí SQLite –Ω–µ –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å
4. **–î—Ä—É–≥–∞—è —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü** ‚Üí –Ω—É–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î

**–ü—Ä–∏—à–ª–∏—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –ø–æ–ø—ã—Ç–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏!**
